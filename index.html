<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Line-Evader</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="controls-info">
      <canvas id="gameCanvas"></canvas>
      <div class="player-controls">
        <div id="roster" class="roster"></div>
      </div>
      <div class="status-row">
        <div id="roomDisplay" class="room-display">Room: --</div>
        <div id="rendererDisplay" class="renderer-display">
          Renderer: Detecting...
        </div>
      </div>
      <div class="game-info">
        <p>Avoid hitting boundaries and trails.</p>
      </div>
      <div class="interface-actions">
        <button id="openPlayerMenuBtn" class="ghost">Player Selection</button>
        <button id="startGameBtn">Start</button>
      </div>
    </div>

    <div class="touch-controls" id="touchControls" aria-hidden="true">
      <button
        class="touch-btn touch-btn-left"
        data-dir="left"
        aria-label="Turn left"
      >
        &lsaquo;
      </button>
      <button
        class="touch-btn touch-btn-right"
        data-dir="right"
        aria-label="Turn right"
      >
        &rsaquo;
      </button>
    </div>

    <div
      class="orientation-warning"
      id="orientationWarning"
      aria-hidden="true"
    >
      <div class="orientation-warning__card">
        <p>Rotate your device to landscape to use touch controls.</p>
      </div>
    </div>

    <div class="mode-overlay" id="modeOverlay">
      <div class="mode-card">
        <div id="modeSelectBlock">
          <h1>Line-Evader</h1>
          <p class="tagline">-- avoid lines and stay alive.</p>
          <h3>Select mode</h3>
          <div class="actions">
            <button id="selectLocal" class="primary">Local</button>
            <button id="selectMp">Multiplayer</button>
          </div>
        </div>
        <div id="mpRoomPrompt" class="mp-room-prompt" style="display: none">          
          <div class="room-option-grid">
            <div class="room-option room-option--host">
              <h4>Host a Room</h4>
              <p>Create a lobby and share the code.</p>
              <button id="createRoomBtn" class="primary">Create Room</button>
            </div>
            <div class="room-option room-option--join">
              <h4>Join a Room</h4>
              <label>Room Code <input id="roomIdInput" placeholder="room-xxxxxx" /></label>
              <button id="joinRoomBtn">Join Room</button>
            </div>
          </div>
          <div class="prompt-actions">
            <button id="mpRoomPromptBack" class="ghost">Back</button>
          </div>
        </div>
        <div id="mpConfig" style="display: none">          
          <div class="prefs-form">
            <div class="name-and-color">
              <label>Name <input id="prefName" placeholder="Player" /></label>
              <span id="prefColorSwatch" class="color-display-swatch"></span>
            </div>
            <label class="pref-controls-field"
              >Controls
              <select id="prefControls">
                <option value="ArrowLeft / ArrowRight">
                  ArrowLeft / ArrowRight
                </option>
                <option value="W / S">W / S</option>
                <option value="A / D">A / D</option>
                <option value="J / L">J / L</option>
                <option value="Mouse Left / Mouse Right">
                  Mouse Left / Mouse Right
                </option>
                <option value="Num4 / Num6">Num4 / Num6</option>
              </select>
            </label>
          </div>
          <div class="lobby-layout">
            <div class="lobby-info">
              <div class="room-summary">                
                <div class="room-summary__code-row">
                  <div id="mpRoomInfo" class="room-summary__code">--</div>
                  <button
                    id="mpRoomCopyBtn"
                    class="room-copy-btn"
                    type="button"
                    disabled
                  >
                    Copy Code
                  </button>
                </div>
                <div class="room-summary__meta">
                  <small id="mpStatus">Offline</small>
                  <small id="mpLatency">Latency: --</small>
                </div>
              </div>
               <div class="actions lobby-actions">
              <button id="mpReadyBtn" class="primary" disabled>
                Ready Up
              </button>
              <button
                id="mpStartBtn"
                class="primary"
                disabled
                style="display: none"
              >
                Start Game
              </button>
            </div>
              <div id="mpPlayerList" class="mp-player-list"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="script.js"></script>
  </body>
</html>
